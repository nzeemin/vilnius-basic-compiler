-q
----------------------------------------------------------------------
10 WIDTH 40,0
20 POKE &O177560,0
30 ? AT(4,10);"КОМАНДЫ AUTO И RENUM";AT(4,11);"(пояснение о формате)."
40 ? AT(20,5)"Имя файла: AUTO1F"
50 GOSUB 1320
60 CLS 
70 DIM B%(15)
80 DIM A%(7,2),WW$(7)
90 CH%=0
100 N%=0
110 NZ%=0
120 CLS 
130 WW$(1)="AUTO 10,10"
140 WW$(2)="RENUM"
150 WW$(3)="AUTO"
160 WW$(4)="RENUM ,,5"
170 WW$(5)="RENUM 10,20,10"
180 RESTORE 700 
190 FOR I%=1 TO 4
200 READ A%(I%,1),A%(I%,2)
210 N%=N%+A%(I%,1)
220 NEXT 
230 RESTORE 710   
240 FOR I%=1 TO N%
250 READ B%(I%)
260 NEXT 
270 GOSUB 1410
280 GOSUB 1200
290 NZ%=NZ%+1
300 ? AT(37,21);NZ%
310 X8%=A%(NZ%,2)
320 X9%=A%(NZ%,2)+A%(NZ%,1)-1
330 ? AT(0,2);"╙";STRING$(25,"╣");AT(26,2);"ё"
340 FOR I%=3 TO 7
350 ? AT(0,I%);"╥";AT(26,I%);"╥"
360 NEXT 
370 ? AT(0,8);"╕";STRING$(25,"╣");AT(26,8);"╧"
380 ON NZ% GOSUB 880 ,960 ,1050,1120
390 X1%=3
400 X2%=7
410 R%=X1%
420 RX%=X1%
430 GOSUB 720 
440 FOR I%=X8% TO X9%
450 IF R%-2<>B%(I%) THEN 460 ELSE 490
460 IF I%=X9% THEN GOSUB 1450 ELSE 480
470 GOTO 430
480 NEXT 
490 X7%=I%
500 K1%=B%(I%)
510 B%(I%)=0
520 FOR I%=1 TO 3100
530 BEEP 
540 NEXT 
550 COLOR 8,2,2
560 ? AT(1,RZ%);WW$(RZ%-2)
570 B%(X7%)=0
580 A%(NZ%,1)=A%(NZ%,1)-1
590 IF A%(NZ%,1)<>0 GOTO 390
600 ? AT(0,0);STRING$(38,32)
610 ? AT(0,1);STRING$(38," ")
620 IF NZ%=4 THEN 650 
630 GOSUB 1320
640 GOTO 290
650 GOSUB 1320
660 CLS 
670 GOSUB 1560
680 POKE &O177560,&O100
685 LOAD "MENU2",R
690 END 
700 DATA 2,1,3,3,1,6,1,7
710 DATA 1,3,2,4,5,4,5
720 ? AT(1,RX%);WW$(RX%-2);AT(0,0);
730 COLOR 2,2,8
740 ? AT(1,R%);WW$(R%-2);AT(0,0);
750 COLOR 8,2,2
760 RX%=R%
770 GOSUB 1480
780 IF W%=13 THEN 860 
790 IF A1%(1)=27 AND A1%(2)=65 THEN 820 
800 IF A1%(1)=27 AND A1%(2)=66 THEN 840 
810 GOTO 770   
820 IF R%<>X1% THEN R%=R%-1 ELSE R%=X2%
830 GOTO 720   
840 IF R%<>X2% THEN R%=R%+1 ELSE R%=X1%
850 GOTO 720   
860 RZ%=R%
870 RETURN 
880 ? AT(1,3);WW$(1)
890 ? AT(1,4);WW$(2)
900 ? AT(1,5);WW$(3)
910 ? AT(1,6);WW$(4)
920 ? AT(1,7);WW$(5)
930 ? AT(1,0);"Выбрать команды, которые автоматиче-"
940 ? AT(0,1);"ски нумеруют строки программы."
950 RETURN 
960 ? AT(1,3);WW$(1)
970 ? AT(1,4);WW$(2)
980 ? AT(1,5);WW$(3)
990 ? AT(1,6);WW$(4)
1000 ? AT(1,7);WW$(5)
1010 ? AT(1,0);"Выбрать команды перенумеровывающие"
1020 ? AT(0,1);"строки программы."
1030 RETURN 
1040 ? AT(1,3);WW$(1)
1050 ? AT(1,4);WW$(2)
1060 ? AT(1,5);WW$(3)
1070 ? AT(1,6);WW$(4)
1080 ? AT(1,7);WW$(5)
1090 ? AT(1,0);"Выбрать команду перенумеровывающую"
1100 ? AT(0,1);"строки текста программы с шагом 5."
1110 RETURN 
1120 ? AT(1,3);WW$(1)
1130 ? AT(1,4);WW$(2)
1140 ? AT(1,5);WW$(3)
1150 ? AT(1,6);WW$(4)
1160 ? AT(1,7);WW$(5)
1170 ? AT(1,0);"Выбрать команду перенумеровывающую"
1180 ? AT(0,1);"строки программы начинаяс 10-ой стр."
1190 RETURN 
1200 ? AT(1,9)"AUTO - переводит в режим авто-"
1210 ? AT(0,10)"матической нумерации строк."
1220 ? AT(1,12)"RENUM - перенумеровывает стро-"
1230 ? AT(0,13)"ки текста программы."
1240 ? AT(1,15)"Примеры:"
1250 ? AT(2,16)"AUTO 5,5"
1260 ? AT(0,17)"(Режим авт. нумерации строк на-"
1270 ? AT(0,18)"чиная с 5-ой стр., с шагом 5.)"
1280 ? AT(2,19)"RENUM 60"
1290 ? AT(0,20)"(Перенумер. строки программы"
1300 ? AT(0,21)"начиная с 60-ой строки.)"
1310 RETURN 
1320 ? AT(2,22)"Нажмите клавишу ПРОБЕЛ.";
1330 IF INP(&O177560,&O200) THEN 1340 ELSE 1330
1340 W%=PEEK(&O177562)
1350 IF W%=32 THEN 1360 ELSE 1330
1360 FOR J%=3 TO 7
1370 ? AT(1,J%);SPC(25)
1380 NEXT J%
1390 ? AT(2,22);SPC(25)
1400 RETURN 
1410 ? AT(30,21)"Задание"
1420 ? AT(31,22)"AUTO1F"
1430 ? AT(35,4)"ШТРАФ";AT(35,5)"╙╣╣╣ё";AT(35,6)"╥   ╥";AT(35,7)"╕╣╣╣╧"
1440 RETURN 
1450 CH%=CH%+1
1460 ? AT(36,6)CH%;AT(39,6)"╥";
1470 RETURN 
1480 FOR I%=1 TO 2
1490 IF INP(&O177560,&O200) THEN 1500 ELSE 1490
1500 W%=PEEK(&O177562)
1510 IF W%=13 AND I%=1 THEN 1550
1520 IF W%=27 AND I%=1 THEN A1%(1)=W% ELSE A1%(2)=W%
1530 IF W%<>27 AND I%=1 THEN I%=2
1540 NEXT I%
1550 RETURN 
1560 ? AT(9,2)"Штрафные очки-";CH%;
1600 IF CH%=>15 THEN 1660
1610 IF CH%=>7 THEN 1640
1620 ? AT(9,3)"О Т Л И Ч Н О  !"
1630 GOTO 1670
1640 ? AT(9,3)"ПОСРЕДСТВЕННО."
1650 GOTO 1670
1660 ? AT(9,3)"ОЧЕНЬ МНОГО, ОЧЕНЬ.";AT(2,4)"Повторите теоретический материал."
1670 ? AT(0,15)
1680 RETURN 
